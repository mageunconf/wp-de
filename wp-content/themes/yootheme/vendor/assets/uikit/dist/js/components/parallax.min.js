/*! UIkit 3.0.0-beta.25 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){function r(e){return e.split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return parseFloat(e)})}function i(e,t){var r=!1;return Object.keys(e).reduce(function(i,a){var o=e[a],n=s(o,t);switch(a){case"x":case"y":if(r)break;var c=["x","y"].map(function(r){return a===r?n+o.unit:e[r]?s(e[r],t)+e[r].unit:0}),l=c[0],p=c[1];r=i.transform+=" translate3d("+l+", "+p+", 0)";break;case"rotate":i.transform+=" rotate("+n+"deg)";break;case"scale":i.transform+=" scale("+n+")";break;case"bgy":case"bgx":i["background-position-"+a[2]]="calc("+o.pos+" + "+(n+o.unit)+")";break;case"color":case"backgroundColor":case"borderColor":i[a]="rgba("+o.start.map(function(e,r){return e+=t*(o.end[r]-e),3===r?parseFloat(e):parseInt(e,10)}).join(",")+")";break;case"blur":i.filter+=" blur("+n+"px)";break;case"hue":i.filter+=" hue-rotate("+n+"deg)";break;case"fopacity":i.filter+=" opacity("+n+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":i.filter+=" "+a+"("+n+"%)";break;default:i[a]=n}return i},{transform:"",filter:""})}function s(e,t){return+(p(e.diff)?+e.end:e.start+e.diff*t*(e.start<e.end?1:-1)).toFixed(2)}if(!e.installed){var a=t.util,o=(a.$,a.assign),n=a.clamp,c=a.Dimensions,l=a.getImage,p=a.isUndefined,u=a.scrolledOver,d=a.query,f=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];t.component("parallax",{props:f.reduce(function(e,t){return e[t]="list",e},{easing:Number,target:String,viewport:Number,media:"media"}),defaults:f.reduce(function(e,t){return e[t]=void 0,e},{easing:1,target:!1,viewport:1,media:!1}),computed:{target:function(){return this.$props.target&&d(this.$props.target,this.$el)||this.$el},props:function(){var e=this;return f.reduce(function(t,i){if(p(e.$props[i]))return t;var s=i.match(/color/i),a=s||"opacity"===i,n=e.$props[i];a&&e.$el.css(i,"");var c,l=(p(n[1])?"scale"===i?1:a?e.$el.css(i):0:n[0])||0,u=p(n[1])?n[0]:n[1],d=~n.join("").indexOf("%")?"%":"px";if(s){var f=e.$el[0].style.color;e.$el[0].style.color=l,l=r(e.$el.css("color")),e.$el[0].style.color=u,u=r(e.$el.css("color")),e.$el[0].style.color=f}else l=parseFloat(l),u=parseFloat(u),c=Math.abs(l-u);if(t[i]={start:l,end:u,diff:c,unit:d},i.match(/^bg/)){var h="background-position-"+i[2];t[i].pos=e.$el.css(h,"").css(h),e.covers&&o(t[i],{start:0,end:l<=u?c:-c})}return t},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(){return"cover"===this.$el.css("backgroundSize","").css("backgroundSize")}},disconnected:function(){delete this._prev,delete this._image},update:[{read:function(){var e=this;if(delete this._prev,delete this._computeds.props,this._active=!this.media||window.matchMedia(this.media).matches,this._image&&(this._image.dimEl={width:this.$el[0].offsetWidth,height:this.$el[0].offsetHeight}),p(this._image)&&this.covers&&this.bgProps.length){var t=this.$el.css("backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");t&&(this._image=!1,l(t).then(function(t){e._image={width:t.naturalWidth,height:t.naturalHeight},e.$emit()}))}},write:function(){var e=this;if(this._image)if(this._active){var t=this._image,r=t.dimEl,i=c.cover(t,r);this.bgProps.forEach(function(s){var a=e.props[s],o=a.start,l=a.end,p=a.pos,u=a.diff,d="bgy"===s?"height":"width",f=i[d]-r[d];if(p.match(/%$/)){if(o>=l)f<u?(r[d]=i[d]+u-f,e.props[s].pos="0px"):(p=-1*f/100*parseFloat(p),p=n(p,u-f,0),e.props[s].pos=p+"px");else{if(f<u)r[d]=i[d]+u-f;else if(f/100*parseFloat(p)>u)return;e.props[s].pos="-"+u+"px"}i=c.cover(t,r)}}),this.$el.css({backgroundSize:i.width+"px "+i.height+"px",backgroundRepeat:"no-repeat"})}else this.$el.css({backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]},{read:function(){var e=u(this.target)/(this.viewport||1);this._percent=n(e*(1-(this.easing-this.easing*e)))},write:function(){var e=this;this._active?this._prev!==this._percent&&(this.$el.css(i(this.props,this._percent)),this._prev=this._percent):Object.keys(i(this.props,0)).forEach(function(t){return e.$el.css(t,"")})},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});